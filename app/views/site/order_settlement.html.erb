<% content_for :customer_title do %>
  订单提交
<% end %>
<script type="text/javascript" src="/assets/lib/jquery.blockUI.js" data-turbolinks-track="true"></script>
<script type="text/javascript" src="/zhonglian/js/order_settlement.js"></script>
<script src="/backend/assets/js/administrative-division.js" type="text/javascript"></script>
<script src="/backend/assets/js/multilevel-select.js" type="text/javascript"></script>
<script>
  $(document).ready(function() {
    MultilevelSelect({
      data: ADMINISTRATIVE_DIVISION,
      nodes: [$('#s1'), $('#s2'), $('#s3')]
    });
  });
</script>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  .order {
    width: 90%;
    margin: 0 auto;
  }

  .order-address {
    color:#000000;
  }

  .select-address {
    width: 98%;
    height: 70px;
    padding : 10px 0 0 5px;
    background-image: url("/zhonglian/img/cat/address.jpg");
    background-repeat: no-repeat;
    background-size: 100% 80%;
    margin-bottom: 10px;
  }

  .confirm-address {
    margin-left: 5px;
    margin-top: 4px;
    font-size: 0.7em;
  }

  .invoice {
    width: 98%;
    height: 50px;
    padding : 10px 0 0 5px;
    background-image: url("/zhonglian/img/cat/address.jpg");
    background-repeat: no-repeat;
    background-size: 100% 80%;
    margin-bottom: 10px;
  }
  .invoice-not {
    margin-right: 10px;
  }

  .address {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: #f2f2f2;
    display: none;
    margin-bottom: 30%;
  }

  .address-top {
    width: 100%;
    height: 40px;
    text-align: center;
    background: #ffffff;
    padding-top: 10px;
  }

  .address-top span {
    font-size: 20px;
  }

  .cancel {
    font-size: 16px;
    margin-right: 5%;
    margin-top: 1px;
  }

  .promo-code {
    width: 90%;
    height: 40px;
    align: center;
  }

  .promo-code input {
    width: 60%;
    height: 20px;
  }

  .promo-code-btn {
    width: 80px;
    height: 28px;
    font-size: 12px;
  }

  .product {
    width: 90%;
    height: 140px;
    margin-left: 5%;

  }

  .product-img {
    width: 30%;
    height: 120px;
  }
  .product-img  img {
    width: 100%;
    height: 120px;
  }

  .product-inf {
    width:70%;
    height: 100px;
  }

  .order-btn {
    background-color: #aa0c40;
    border: 1px solid #aa0c40;
    border-radius: 5px;
    color: #ffffff;
    text-align: center;
  }


  .ship-address div {
    border-bottom: 1px solid #ddd;
    background: #f9f9f9;
    clear: both;
    display: block;
    height: 80px;
  }

  .p-l {
    width: 10%;
    display: block;
    float: left;
    line-height: 40px;
    height: 40px;
    margin-left: 5%;
  }

  .p-m {
    width: 70%;
    display: block;
    float: left;
    margin: 10px 0 0 0;
    padding: 0;

  }

  .p-m span {
    line-height: 24px;
    font-size: 18px;
    color: #666;
  }
  .p-m span:last-child{
    font-size: 12px;
    padding-top: 10px;
    margin-bottom: 10px;
  }
  .p-r {
    width: 10%;
    display: block;
    float: left;
    line-height: 45px;
  }

  .p-r a {
    font-size: 24px;
    color: #dddddd;
    margin: auto auto auto 20px;
  }

  .address-foot {
    width: 90%;
    height: 100px;
    text-align: center;
    margin-top: 20px;
    margin-left: 15%;
  }

  .add-address {
    background-color: #aa0c40;
    border: 1px solid #aa0c40;
    border-radius: 5px;
    color: #ffffff;
    font-size: 25px;
    width: 80%;
  }

  .cancel-add-addre {
    border: 1px solid #cccccc;
    border-radius: 3px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 400;
    line-height: 1;
    text-align: center;
    vertical-align: top;
    white-space: nowrap;
    background-color: #aa0c40;
    border: 1px solid #aa0c40;
    color: #fff;
    margin-top: 1px;
  }

  .address-mesg {
    display: none;
    text-align: center;
    color: #aa0c40;
  }

  .address-add-btn {
    margin-bottom : 30%;
  }

  .form-box {
    width: 94%;
    height: 100%;
    overflow: hidden;
    display: none;
  }

  .form-box-top {
    width: 90%;
    height: 40px;
    text-align: center;
    background: #ffffff;
    padding-top: 10px;

  }

  .form-box-top span {
    margin-left: 20%;
    font-size: 20px;
  }

  .invoice-history {
    float:left;
    width: 100%;
    display: none;
  }

  .cancel-history-invoice {
    font-size: 16px;
    margin-right: 5%;
    margin-top: 1px;
  }

  .invoice-inf {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: none;
  }

  .invoice-inf-top {
    width: 100%;
    height: 40px;
    text-align: center;
    background: #ffffff;
    padding-top: 10px;
  }

  .invoice-mesg {
    display: none;
    text-align: center;
    color: #aa0c40;
  }

  .cancel-invoice {
    font-size: 16px;
    margin-left: 5%;
    margin-top: 1px;
  }

  .confirm-invoice {
    font-size: 16px;
    margin-right: 5%;
    margin-top: 1px;
  }

  .invoice-history-select {
    width: 100%;
    height: 50px;
    float: left;
    margin-top: 15px;
  }

  .invoice-item-input {
    margin-left: 20px;
    margin-top: 7px;
  }

  .invoice-item-inf {
    margin-left: 20px;
  }

  .rise,.content {
    width: 90%;
    height: 25px;
    margin-left: 5%;
    margin-top: 10px;
    font-size: 18px;
  }

  .pull-left {
    float: left;
  }

  .pull-right {
    float: right;
  }

  .text1 {
    color: #787878;
    margin-left: 10px;
    white-space: nowrap;
    overflow: hidden;
  }

  .text2 {
    color: #aa0c40;
    margin-left: 10px;
  }

  .text3 {
    color: #787878;
  }

  .text4 {
    color: red;
    font-weight: bold;
    font-size: 18px;
  }

  .btn {
    margin-bottom: 70px;
  }

  a {
    color: #000000;
  }

  .order-message {
    display: none;
    text-align: left;
  }

  .space {
    width: 100%;
    height: 90px;
    float: left;
  }
</style>
<input type="hidden" name="address-id" class="address-id">
<input type="hidden" name="invoice-id" class="invoice-id" value="0">
<a href="javascript:void(0)" class="order-address">
  <div class="select-address">
    <span class="pull-left">请选择收货地址</span><br>
    <span class="pull-left confirm-address"></span>
  </div>
</a>
<a href="javascript:void(0)" class="invoice-need">
  <div class="invoice">
    <span class="pull-left">开具发票</span>
    <span class="invoice-not pull-right">不开发票</span>
  </div>
</a>
<div class="address">
  <div class="address-top">
    <span>收货地址</span>
    <button class="cancel btn btn-red pull-right">X</button>
  </div>
  <div class="ship-address">
    <% @shipaddresses.each do |ad| %>
      <div class="history-ship-address">
        <p class="p-l"><input type="radio" class ="shipaddress" name="shipaddress" value="<%= ad.id %>"/></p>
        <p class="p-m">
          <span><%= ad.receive_name %></span>
          <span style="float: right"><%= ad.mobile %></span>
          <br/>
          <span class="selected-address"><%= ad.province %><%= ad.city %><%= ad.region %><%= ad.address %></span>
        </p>
        <p class="p-r"><a href="#">&gt;</a></p>
      </div>
    <% end %>
  </div>
  <div class="address-foot">
    <a href="javascript:void(0)" class="address-add" data-no-turbolink>
      <div class="add-address">添加新地址</div>
    </a>
  </div>
  <div class="space">
  </div>
</div>
<div class="form-box">
  <div class="form-box-top">
    <span>添加新地址</span>
    <button class="cancel-add-addre btn-red pull-right">X</button>
  </div>
  <div>
  <div class="address-mesg"><p></P></div>
  <input type=hidden name=uid value="<%= current_user.id %>">
  <div class="input-row">
    <label>姓名</label>
    <input type="text" class="receive_name" name="receive_name" placeholder="用户名">
  </div>
  <div class="input-row">
    <label>省份</label>
    <select name="province" id="s1" ></select>
  </div>
  <div class="input-row">
    <label>城市</label>
    <select name="city" id="s2"></select>
  </div>
  <div class="input-row">
    <label>地区</label>
    <select name="region" id="s3"></select>
  </div>
  <div class="input-row">
    <label>街道地址</label>
    <input type="text" name="address" placeholder="街道地址">
  </div>
  <div class="input-row">
    <label>邮编</label>
    <input type="text" name="postcode" placeholder="邮编">
  </div>
  <div class="input-row">
    <label>手机</label>
    <input type="text" name="tel" placeholder="手机">
  </div>
  <div class="input-row">
    <label>固定电话</label>
    <input type="text" name="mobile" placeholder="固定电话">
  </div>
  <div class="address-add-btn"><button class="btn-add-address btn btn-red btn-block">添加</button></div>
</div>
</div>
<div class="invoice-history">
  <div class="invoice-inf-top">
    <span>开具发票</span>
    <button class="cancel-history-invoice btn btn-red pull-right">X</button>
  </div>
  <% @invoices.each do |i| %>
  <div class="invoice-history-select">
    <div class="pull-left invoice-item-input">
      <input type="radio" name="invoice" class="invoice-item-select" value="<%= i.id %>">
    </div>
    <div class="pull-left invoice-item-inf">
      <span>发票抬头：</span><span><%= i.rise %></span><br>
      <span>发票抬头：</span><span><%= i.content %></span>
    </div>
  </div>
  <hr class="invoice-hr pull-left">
  <% end %>
  <button class="add-new-invoice btn btn-red btn-block pull-left">添加新发票</button>
  <div class="space">
  </div>
</div>
<div class="invoice-inf">
  <div class="invoice-inf-top">
    <button class="cancel-invoice btn btn-red pull-left">X</button>
    <span>开具发票</span>
    <button  class="confirm-invoice btn btn-red pull-right">确定</button>
  </div>
  <div class="invoice-mesg"><p></P></div>
  <div>
    <input class="rise" placeholder="请输入发票抬头">
    <input class="content" placeholder="请输入发票内容">
  </div>
  <div class="space">
  </div>
</div>
<div class="order">
  <div class="promo-code">
    <input type="text" placeholder="请输入优惠码">
    <button class="promo-code-btn">使用优惠码</button>
  </div>
  <hr>
  <div class="submit-order pull-right">
    <span class="text3">总金额：</span>
    <span class="text2">0</span>
    <button class="order-btn" type="button">提交订单</button>
  </div>
</div>
<div class="order-message" id="order-message">
  <p class="text4"></p>
</div>
<div class="space">
</div>
<%= render "site/shared/bottombar" %>
